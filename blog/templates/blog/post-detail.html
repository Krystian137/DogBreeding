{% extends "base.html" %}
{% load static %}

{% block title %}{{ post.title }} - Costa Rizada{% endblock %}

{% block header_content %}
    <h1>{{ post.title }}</h1>
    <span class="subheading">{{ post.created_at|date:"d M Y" }}</span>
{% endblock %}

{% block extra_head %}
<!-- CSS for post detail page -->
<link rel="stylesheet" href="{% static 'css/post.css' %}">
{% endblock %}

{% block content %}
<div class="post-detail-container">
    <article class="post-detail-card">
        <!-- Badge with a date -->
        <div class="post-badge">
            <span class="post-badge-date">{{ post.created_at|date:"d M Y" }}</span>
        </div>

        <!-- Main Photo -->
        {% if post.photos.first %}
        <div class="post-hero-image">
            <img src="{{ post.photos.first.image.url }}" 
                 alt="{{ post.title }}"
                 loading="lazy">
        </div>
        {% endif %}

        <!-- Post content -->
        <div class="post-content">
            <h1 class="post-detail-title">{{ post.title }}</h1>
            
            <div class="post-meta">
                <span class="meta-item">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                    </svg>
                    Autor: Costa Rizada
                </span>
                <span class="meta-item">
                    <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                        <path d="M11 6.5a.5.5 0 0 1 .5-.5h1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-1a.5.5 0 0 1-.5-.5v-1z"/>
                        <path d="M3.5 0a.5.5 0 0 1 .5.5V1h8V.5a.5.5 0 0 1 1 0V1h1a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2V3a2 2 0 0 1 2-2h1V.5a.5.5 0 0 1 .5-.5zM1 4v10a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1V4H1z"/>
                    </svg>
                    {{ post.created_at|date:"d M Y" }}
                </span>
            </div>

            <div class="post-body">
                {{ post.content|safe|linebreaks }}
            </div>

            <!-- Photos for 1 or more -->
            {% if post.photos.all|length > 1 %}
            <div class="post-gallery">
                <h3 class="gallery-title text-white">Galeria zdjęć</h3>
                <div class="gallery-grid">
                    {% for photo in post.photos.all %}
                        {% if not forloop.first %}
                        <div class="gallery-item">
                            <img src="{{ photo.image.url }}" 
                                 alt="{{ post.title }}"
                                 loading="lazy">
                        </div>
                        {% endif %}
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        </div>

        <!-- Back button -->
        <div class="post-actions">
            <a href="{% url 'blog:main' %}" class="btn-back">
                <svg width="16" height="16" fill="currentColor" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M12 8a.5.5 0 0 1-.5.5H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5a.5.5 0 0 1 .5.5z"/>
                </svg>
                Powrót do aktualności
            </a>
        </div>
    </article>
</div>
{% endblock %}